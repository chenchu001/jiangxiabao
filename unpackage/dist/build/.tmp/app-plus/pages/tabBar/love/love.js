(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/love/love"],{"0e0e":function(t,e,i){},5532:function(t,e,i){"use strict";var a=i("0e0e"),s=i.n(a);s.a},"6a2f":function(t,e,i){"use strict";i.r(e);var a=i("a3bb"),s=i("aedf");for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i("5532");var o=i("2877"),l=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=l.exports},a3bb:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loading?i("view",{staticClass:"love"},[i("view",{staticClass:"content"},[i("view",{staticClass:"item"},[t._l(t.loveList,function(e,a){return i("view",{key:a,staticClass:"list"},[i("view",{staticClass:"title"},[i("image",{staticClass:"avatar",attrs:{src:e.headimgurl?e.headimgurl:"http://mrjx.weasing.cn/defaultimg.png",mode:""}}),i("text",{staticClass:"name"},[t._v(t._s(e.nickname))])]),i("view",{staticClass:"info"},[i("view",{staticClass:"text"},[t._v(t._s(e.bbstitle))]),e.artpics?i("view",{staticClass:"pic-wrap"},t._l(e.artpics,function(s,n){return i("view",{key:n,staticClass:"pic"},[i("lazy-image",{attrs:{mode:"aspectFill",realSrc:s,placeholdSrc:t.placeholderSrc,eventid:"c5a06e4e-0-"+a+"-"+n,mpcomid:"c5a06e4e-0-"+a+"-"+n},on:{handleImageClick:function(i){t.previewImage(e.artpics,n)}}})],1)})):t._e()]),i("view",{staticClass:"bottom"},[i("view",{staticClass:"left"},[t._v(t._s(e.createtime))]),i("view",{staticClass:"right"},[i("view",{staticClass:"review",attrs:{"data-id":e.id,eventid:"c5a06e4e-1-"+a},on:{tap:t.openRelease}},[i("image",{attrs:{src:"../../../static/love-icon1.png"}})]),i("view",{staticClass:"like",attrs:{"data-id":e.id,eventid:"c5a06e4e-2-"+a},on:{tap:function(e){e.stopPropagation(),t.handleClickLike(e)}}},[e.hasfav?t._e():i("image",{attrs:{src:"../../../static/love-icon2.png",mode:""}}),e.hasfav?i("image",{attrs:{src:"../../../static/love-icon2-active.png",mode:""}}):t._e(),i("text",{class:[e.isLike?"active":""]},[t._v(t._s(e.prizenum))])])])]),e.prise.length||e.comments.length?i("view",{staticClass:"area"},[i("view",{staticClass:"daosanjiao"}),e.prise.length?i("view",{staticClass:"like-wrap"},[i("image",{attrs:{src:"../../../static/love-icon5.png",mode:""}}),t._l(e.prise,function(a,s){return e.prise.length>1?i("text",{key:s},[i("text",[t._v(t._s(a.nickname))]),!e.prise.length==s?i("text",[t._v(",")]):t._e()]):t._e()}),t._l(e.prise,function(a,s){return 1==e.prise.length?i("text",{key:s},[i("text",[t._v(t._s(a.nickname))])]):t._e()})],2):t._e(),e.comments.length?i("view",{staticClass:"review-wrap"},t._l(e.comments,function(e,a){return i("view",{key:a,staticClass:"list"},[i("text",{staticClass:"left"},[t._v(t._s(e.nickname))]),t._v("："),i("text",{staticClass:"right"},[t._v(t._s(e.replyinfo))])])})):t._e()]):t._e()])}),t.loadingFlag?i("uni-load-more",{attrs:{loadingType:t.loadingType,contentText:t.contentText,mpcomid:"c5a06e4e-1"}}):t._e()],2)])]):t._e()},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},aedf:function(t,e,i){"use strict";i.r(e);var a=i("d034"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=s.a},d034:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("56ed")),s=o(i("88c9")),n=i("e635");function o(t){return t&&t.__esModule?t:{default:t}}var l={components:{lazyImage:s.default,uniLoadMore:a.default},data:function(){return{placeholderSrc:"../../../static/defaultImg.jpg",loading:!1,loveList:[],imgArr:[],num:1,total:0,size:10,loadingType:1,loadingFlag:!1,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}},methods:{previewImage:function(e,i){console.log(e,i);var a=e[i];t.previewImage({current:a,urls:e})},openRelease:function(e){var i=e.currentTarget.dataset.id;t.navigateTo({url:"../../love/reply/reply?id="+i+"&type=friend"})},handleClickLike:function(e){var i=this,a=t.getStorageSync("memberid"),s=e.currentTarget.dataset.id;t.request({url:n.config.api_base_url+"bbsarticleprize",method:"POST",data:{artid:s,memberid:a,prizetype:1},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){if(200==e.statusCode&&(e=e.data,"0000"===e.rescode))for(var a=0;a<i.loveList.length;a++)if(i.loveList[a].id==s)if(1==i.loveList[a].hasfav){i.loveList[a].hasfav=0,i.loveList[a].prizenum--;for(var n=0;n<i.loveList[a].prise.length;n++)t.getStorageSync("nickname")===i.loveList[a].prise[n].nickname&&i.loveList[a].prise.splice(n,1)}else i.loveList[a].hasfav=1,i.loveList[a].prizenum++,i.loveList[a].prise.unshift({nickname:t.getStorageSync("nickname")})},fail:function(){},complete:function(){}})},_getLoveList:function(){var e=this,i=t.getStorageSync("memberid");t.request({url:n.config.api_base_url+"bbsarticle/index",method:"GET",data:{p:this.num,size:this.size,memberid:i},success:function(i){t.hideLoading(),t.stopPullDownRefresh(),e.loading=!0,e.loadingFlag=!0,i=i.data,e.total=Number(i.total),e.loveList=i.data,e.total<=10&&(e.loadingType=2)}})}},onReachBottom:function(){var e=this;2!=this.loadingType&&(this.num=this.num+1,(this.num-1)*this.size<=this.total?t.request({url:n.config.api_base_url+"bbsarticle/index",data:{p:this.num,size:this.size,memberid:t.getStorageSync("memberid")},success:function(t){200==t.statusCode&&(t=t.data,e.loveList=e.loveList.concat(t.data),e.loveList.length===e.total&&(e.loadingType=2))}}):this.loadingType=2)},onPullDownRefresh:function(){this.loveList=[],this.total=0,this.num=1,this.loadingType=1,this._getLoveList()},onNavigationBarButtonTap:function(e){var i=e.index;0===i&&t.navigateTo({url:"../../love/release/release"}),1===i&&t.navigateTo({url:"../../info/index/index"})},onShow:function(e){if(this.$store.state.isName&&(this.loveList=[],this.total=0,this.num=1,this.loadingFlag=!1,this.loadingType=1,t.showLoading({title:"加载中"}),this._getLoveList()),this.$store.state.isPublish&&(this.loveList=[],this.total=0,this.num=1,this.loadingFlag=!1,this.loadingType=1,t.showLoading({title:"加载中"}),this._getLoveList()),""!=this.$store.state.replayId&&""!=this.$store.state.replyInfo)for(var i=this.$store.state.replyId,a=this.$store.state.replyInfo,s=0;s<this.loveList.length;s++)this.loveList[s].id==i&&this.loveList[s].comments.push({nickname:t.getStorageSync("nickname"),replyinfo:a})},onHide:function(){this.$store.commit("clearReply"),this.$store.commit("clearPublish",!1),this.$store.commit("changeName",!1)},onLoad:function(e){t.showLoading({title:"加载中"}),this._getLoveList()}};e.default=l}).call(this,i("6e42")["default"])},e9c8:function(t,e,i){"use strict";i("6de6");var a=n(i("b0ce")),s=n(i("6a2f"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(s.default))}},[["e9c8","common/runtime","common/vendor"]]]);