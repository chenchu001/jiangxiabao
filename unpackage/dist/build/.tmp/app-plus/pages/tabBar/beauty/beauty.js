(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/beauty/beauty"],{"1fd1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("view",{staticClass:"beauty"},[a("view",{staticClass:"wrap"},[a("view",{staticClass:"item"},[t._l(t.list,function(e,i){return a("view",{key:i,staticClass:"list",attrs:{"data-classifyid":e.catetype,"data-id":e.id,eventid:"65ba8d4e-0-"+i},on:{tap:t.openDetail}},[a("image",{attrs:{src:e.pic}}),3==e.catetype?a("image",{staticClass:"play-icon",attrs:{src:"../../../static/play-icon.png"}}):t._e(),a("view",{staticClass:"info"},[a("text",{staticClass:"left uni-ellipsis"},[t._v(t._s(e.title))]),a("text",{staticClass:"right"},[t._v(t._s(e.createtime?e.createtime.split(" ")[0]:""))])])])}),t.loadingFlag?a("uni-load-more",{attrs:{loadingType:t.loadingType,contentText:t.contentText,mpcomid:"65ba8d4e-0"}}):t._e()],2)]),a("mpvue-picker",{ref:"mpvuePicker",attrs:{themeColor:t.themeColor,mode:t.mode,deepLength:t.deepLength,pickerValueDefault:t.pickerValueDefault,pickerValueArray:t.pickerValueArray,eventid:"65ba8d4e-1",mpcomid:"65ba8d4e-1"},on:{onConfirm:t.checkClassify,onCancel:t.onCancel}})],1):t._e()},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},"467a":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("e635"),s=n(a("11ed")),l=n(a("56ed"));function n(t){return t&&t.__esModule?t:{default:t}}var o={components:{mpvuePicker:s.default,uniLoadMore:l.default},data:function(){return{loading:!1,loadingType:1,loadingFlag:!0,num:1,total:0,size:10,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},classifyVal:"",themeColor:"#007AFF",pickerValueArray:[],mode:"",deepLength:1,pickerValueDefault:[0],list:[],pickerSingleArray:[{label:"全部",value:3},{label:"摄影",value:1},{label:"视频",value:2}]}},methods:{checkClassify:function(e){t.showTabBar(),this.setStyle(0,e.label),t.showLoading({title:"加载中"}),this.num=1,this.total=0,this.loadingType=1,this.classifyVal=e.label,"摄影"===e.label?this._getClassifyList(2):"视频"===e.label?this._getClassifyList(3):this._getAllList()},onCancel:function(){t.showTabBar()},openDetail:function(e){var a=e.currentTarget.dataset.classifyid,i=e.currentTarget.dataset.id;2==a?t.navigateTo({url:"../../beauty/pic/pic?id="+i}):t.navigateTo({url:"../../beauty/video/video?id="+i})},setStyle:function(t,e){var a=getCurrentPages(),i=a[a.length-1],s=i.$getAppWebview(),l=s.getStyle().titleNView;e.length>3&&(e=e.substr(0,3)+"..."),l.buttons[0].text=e,s.setStyle({titleNView:l})},_getAllList:function(){var e=this;this.list=[],t.request({url:i.config.api_base_url+"articlelist",method:"GET",data:{cateid:3},success:function(a){t.hideLoading(),a=a.data,e.loading=!0,e.total=Number(a.total),e.loadingFlag=!0,e.list=a.data,e.total<=10&&(e.loadingType=2)}})},_getClassifyList:function(e){var a=this;this.list=[],t.request({url:i.config.api_base_url+"articlelist",method:"GET",data:{cateid:3,catetype:e},success:function(e){e=e.data,a.list=e.data,t.hideLoading(),a.total=Number(e.total),a.loadingFlag=!0,a.total<=10&&(a.loadingType=2)}})}},onNavigationBarButtonTap:function(e){0===e.index&&(t.hideTabBar(),this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()),1===e.index&&t.navigateTo({url:"../../info/index/index"})},onReachBottom:function(){var e=this;2!=this.loadingType&&("摄影"===this.classifyVal?(this.num=this.num+1,(this.num-1)*this.size<=this.total?t.request({url:i.config.api_base_url+"articlelist?p="+this.num+"&size="+this.size,data:{cateid:3,catetype:2},success:function(t){200==t.statusCode&&(t=t.data,e.list=e.list.concat(t.data),e.list.length===e.total&&(e.loadingType=2))}}):this.loadingType=2):"视频"===this.classifyVal?(this.num=this.num+1,(this.num-1)*this.size<=this.total?t.request({url:i.config.api_base_url+"articlelist?p="+this.num+"&size="+this.size,data:{cateid:3,catetype:3},success:function(t){200==t.statusCode&&(t=t.data,e.list=e.list.concat(t.data),e.list.length===e.total&&(e.loadingType=2))}}):this.loadingType=2):(this.num=this.num+1,(this.num-1)*this.size<=this.total?t.request({url:i.config.api_base_url+"articlelist?p="+this.num+"&size="+this.size,data:{cateid:3},success:function(t){200==t.statusCode&&(t=t.data,e.list=e.list.concat(t.data),e.list.length===e.total&&(e.loadingType=2))}}):this.loadingType=2))},onLoad:function(){t.showLoading({title:"加载中"}),this.classifyVal="全部",this._getAllList()}};e.default=o}).call(this,a("6e42")["default"])},"573e":function(t,e,a){"use strict";a.r(e);var i=a("1fd1"),s=a("e0c0");for(var l in s)"default"!==l&&function(t){a.d(e,t,function(){return s[t]})}(l);a("74f9");var n=a("2877"),o=Object(n["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports},"74f9":function(t,e,a){"use strict";var i=a("750b"),s=a.n(i);s.a},"750b":function(t,e,a){},e0c0:function(t,e,a){"use strict";a.r(e);var i=a("467a"),s=a.n(i);for(var l in i)"default"!==l&&function(t){a.d(e,t,function(){return i[t]})}(l);e["default"]=s.a},ed88:function(t,e,a){"use strict";a("6de6");var i=l(a("b0ce")),s=l(a("573e"));function l(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))}},[["ed88","common/runtime","common/vendor"]]]);